<!DOCTYPE html>
<html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=",  ">
<title>Creating a User for RQ  | iQmetrix Developer Portal</title>
<link rel="stylesheet" type="text/css" href="../../css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../../css/modern-business.css">
<link rel="stylesheet" type="text/css" href="../../css/customstyles.css">
<link rel="stylesheet" type="text/css" href="" | prepend:site.pagefileurl }}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../../js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.5/clipboard.min.js"></script>
<script src="../../js/toc.js"></script>
<script src="../../js/customscripts.js"></script>
<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">


<!-- Image popup source files -->
<!-- http://dimsemenov.com/plugins/magnific-popup/ -->
<link rel="stylesheet" type="text/css" href="../../css/magnific-popup.css">
<script src="../../js/jquery.magnific-popup.js"></script>


<script>
    $(document).ready(function() {

        // surround each image with an anchor class  for image popup
        $('img').each( function() {
            var $img = $(this),
            href = $img.attr('src');
            $img.wrap('<a class="image-link" href=' + href + '></a>');
             
        });

        // make each image with image-link class popup "on click"
        // !! Drawback -- all images could popup :(
        $('.image-link').magnificPopup({
            type:'image',
            closeOnContentClick: true
        });
                
    });    
</script>


<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<script type="text/javascript">
    //Hacky code to make sure they don't go to a bad page
    $( window ).load(function() {

        if (document.baseURI.indexOf("api/generalledger.html") > 0) {
            window.location.href = 'http://developers.iqmetrix.com/api/general-ledger/';
        }
        else if (document.baseURI.indexOf("api/productlibrary.html") > 0) {
          window.location.href = 'http://developers.iqmetrix.com/api/product-library/';
        }
        else if (document.baseURI.indexOf("api/entitystore.html") > 0) {
          window.location.href = 'http://developers.iqmetrix.com/api/entity-store/';
        }
        else if(document.baseURI.indexOf(".html") > 0) {
           window.location.href = document.baseURI.substring(0, document.baseURI.indexOf(".html"));
        }
    });
</script>





 

<script>
  $(function () {
      $('[data-toggle="tooltip"]').tooltip()
  })
</script>






  </head>

<body>

   <!-- Send feedback function -->
<script>
    function SendLinkByMail(href) {
        var subject= " all documentation feedback";
        var body = "I have some feedback about the Creating a User for RQ page: ";
        body += window.location.href;
        body += "";
        var uri = "mailto:apidesign@iqmetrix.com?subject=";
        uri += encodeURIComponent(subject);
        uri += "&body=";
        uri += encodeURIComponent(body);
        window.location.href = uri;
    }
</script>

<!-- Navigation -->
<nav id="navbar-custom" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
   <div class="container topnavlinks">
   <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a href="http://localhost:4006/">
        <span id="top-iq-logo"><img src="http://melissakendall.github.io/documentation-testing/images/iq-logo-white.png"></span>
        <span id="projectTitle">iQmetrix Developer Portal</span>
      </a>
   </div>
   <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul id="top-bar-categories" class="nav navbar-nav navbar-right">
      
      <!-- entries without drop-downs appear here -->
      <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
      <!-- 

Hard coding for now, so no longer uses topnav config









  
      
      
          <li><a href="/api/changelog/">CHANGELOG</a></li>
      
    
  
      
      
          <li class="active"><a href="//">API REFERENCE</a></li>
       
    
  
      
      
          <li><a href="http://iqmetrix.com" target="_blank">BACK TO iQMETRIX.COM »</a></li>
      
    
  


-->

<li><a href="http://melissakendall.github.io/documentation-testing/api/?entity=all">SHOW ALL</a></li>
<li><a href="http://melissakendall.github.io/documentation-testing/api/?entity=partner">PARTNERS</a></li>
<li><a href="http://melissakendall.github.io/documentation-testing/api/?entity=dropship">DROPSHIP</a></li>
<li><a href="mailto:?subject=Support">SUPPORT</a></li>
<li><a href="http://iqmetrix.com" target="_blank">BACK TO iQMETRIX.COM »</a></li>

         <!--
      <li>
         <div id="search-demo-container">
            <input type="text" id="search-input" placeholder="">
            <ul id="results-container"></ul>
         </div>
         <script src="../..//js/jekyll-search.js" type="text/javascript"></script>
         <script type="text/javascript">
            SimpleJekyllSearch({
              searchInput: document.getElementById('search-input'),
              resultsContainer: document.getElementById('results-container'),
              json: '../../search.json',
              searchResultTemplate: '<li><a href="{url}" title="Creating a User for RQ">{title}</a></li>',
              noResultsText: '',
              exclude: '404'
            })
         </script>
      </li>
         -->
    

   </div>
   <!-- /.container -->
</nav>

    <!-- Page Content -->
    <div class="container">
        <div class="col-lg-12">&nbsp;</div>

            <!-- Col-md-3 -->
            <!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>
            $(document).ready(function() {

                // Initialize navgoco with default options
                $("#mysidebar").navgoco({
                    caretHtml: '',
                    accordion: true,
                    openClass: 'active', // open
                    save: false, // leave false or nav higlighting doesn't work right
                    cookie: {
                        name: 'navgoco',
                        expires: false,
                        path: '/'
                    },
                    slide: {
                        duration: 400,
                        easing: 'swing'
                    }
                });

                $("#collapseAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', false);
                });

                $("#expandAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', true);
                });


                if(window.location.hostname == "melissakendall.github.io")
                {
                    $("#mysidebar a").each(function(e) {
                        var url = $(this).attr("href");
                        
                        if(url != null) {
                            url = "http://melissakendall.github.io/documentation-testing" + url;
                        }

                        $(this).attr("href", url);
                    });                   
                }

            });
                           
        </script>

        







        <ul id="mysidebar" class="nav affix">
            
                
                    
                        <li><a>API Reference</a>
                            <ul style="display: none;">
                                
                                    
                                        
                                            <li><a href="/api/authentication/">Authentication</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/assets/">Assets</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/catalog/">Catalog</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/company-tree/">Company Tree</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/crm/">Customers</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Dropship</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/api/cost-feed/">Cost Feed</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/product-feed/">Product Feed</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/product-subscription/">Product Subscription</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/saccs/">Shipping Aggregator</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/shipping-options/">Shipping Options</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/supplier-availability/">Supplier Availability</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/supplier-orders/">Supplier Orders</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/api/entity-store/">Entities</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/general-ledger/">General Ledger</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/availability/">Inventory Availability</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/orders/">Orders</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Partners</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/api/partner-reporting/">Partner Reporting</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/partner-relationships/">Relationships</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/api/pricing">Pricing</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Product Library</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/api/classification-tree/">Classification Tree</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/field-definitions/">Field Definitions</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/product-library/">Products</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/product-structure/">Product Structure</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/api/reference/">Reference</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">RQ</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/api/carrier-integration/">Carrier Integration</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/cmi/">Customer Managed Inventory (CMI)</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/commissions/">Commissions</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/epc/">Electronic Product Catalog (EPC)</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/punch-clock/">Punch Clock</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/api/vmi/">Vendor Managed Inventory (VMI)</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/api/security-roles/">Security Roles</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/api/user-manager/">User Manager</a></li>
                                        
                                    
                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a>Guides</a>
                            <ul style="display: none;">
                                
                                    
                                        
                                            <li><a href="/guides/creating-an-in-store-order/">Creating an In Store Order</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li class="active"><a href="/guides/creating-a-user-for-rq/">Creating a User for RQ</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Dropship Client Integration Guides</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/guides/dropship-pos-guide/">Dropship Point of Sale Guide</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Dropship Partner Integration Guides</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/guides/dropship-onboarding-guide/">Dropship Onboarding Guide</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/dropship-order-guide/">Dropship Order Management Guide</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/dropship-test-order-guide/">Dropship Test Order Guide</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/guides/commerce-guide/">eCommerce Integration Guide</a></li>
                                        
                                    
                                
                                    
                                        <li class="thirdlevel"><a href="#">Endless Aisle Integration Guide</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="/guides/ea-guide/overview">Overview</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/ea-guide/corporate-hierarchy">Corporate Hierarchy</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/ea-guide/content">Content</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/ea-guide/inventory">Inventory</a></li>
                                                    
                                                
                                                    
                                                        <li><a href="/guides/ea-guide/orders">Orders</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                                    
                                        
                                            <li><a href="/guides/3pa/">Third Party Authentication</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/guides/vmi-onboarding-guide/">VMI Onboarding Guide</a></li>
                                        
                                    
                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a>Core Concepts</a>
                            <ul style="display: none;">
                                
                                    
                                        
                                            <li><a href="/concepts/classification-tree/">Classification Tree</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/concepts/company-tree/">Company Tree</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/concepts/product-library/">Product Library</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/concepts/product-structure/">Product Structure</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/concepts/user-manager/">User Manager</a></li>
                                        
                                    
                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a>FAQ</a>
                            <ul style="display: none;">
                                
                                    
                                        
                                            <li><a href="/faq/auth-faq/">Authentication FAQ</a></li>
                                        
                                    
                                
                                    
                                        
                                            <li><a href="/faq/dropship-faq/">Dropship FAQ</a></li>
                                        
                                    
                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a href="/reference-applications/">Reference Applications</a>
                    
                
            
        </ul>

        
    </div>
<!-- div missing here is intentional -->

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above.-->
<script>$("li.active").parents('li').toggleClass("active");</script>


            
              <div class="col-md-7">
<h2 id="overview">Overview</h2>

<p>This guide is intended to walk you through the process of adding a employee from your system into RQ as an employee (user) and assigning it to a location with a security role.</p>

<p>Users in the User Manager represent Employee accounts from the Entity Store that are used to access data within RQ. To learn more about this interaction, see <a href="/user-manager/">User Manager</a>.</p>

<p>The following APIs will be covered in this guide:</p>

<ul>
  <li>Authentication</li>
  <li>User Manager</li>
  <li>Company Tree</li>
  <li>Security Roles</li>
</ul>

<h4 id="who-is-this-guide-for">Who Is This Guide For?</h4>

<p>The intended audience for this guide are developers who are integrating employees within their system into the Entity Store program.</p>

<h4 id="prerequisites">Prerequisites</h4>

<p>To use this guide, the following steps must be completed:</p>

<ul>
  <li>You must have <strong>RQ v5.12</strong> or later (supports two-way communication between APIs and RQ)</li>
  <li>You must have your <strong>onboarding package</strong> from iQmetrix, which includes your access credentials and environments</li>
  <li>Your Company Tree in RQ, representing company structure (stores, groups, divisions, etc.) must be created</li>
</ul>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip: </b>If the above steps are not complete or you are not sure, please contact <a href="mailto:?subject=RQ User Support">API Support</a>.</div>

<h3 id="before-you-begin">Before You Begin</h3>
<p>Before you can create and assign a User, you will need to know:</p>

<ul>
  <li><strong>Who</strong> is being assigned the role, the User</li>
  <li><strong>What</strong> access the user is granted in the company, the Security Role</li>
  <li><strong>Where</strong> the user is located in the company, the Location</li>
</ul>

<h2 id="step-1---authenticating">Step 1 - Authenticating</h2>

<p>In order to make authorized requests to iQmetrix APIs, you need an <a href="/api/glossary/#access-token">Access Token</a>.</p>

<p>See the table below for different ways of getting an Access Token.</p>

<p><br />
<strong>Table 1:</strong> Methods for Obtaining an Access Token</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">If…</th>
      <th style="text-align: left">Then…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">You do not have an Access Token</td>
      <td style="text-align: left">See <a href="/api/authentication/#obtaining-an-access-token">Obtaining an Access Token</a></td>
    </tr>
    <tr>
      <td style="text-align: left">You have an Access Token, but it is close to expiring</td>
      <td style="text-align: left">See <a href="/api/authentication/#refreshing-an-access-token">Refreshing an Access Token</a></td>
    </tr>
  </tbody>
</table>

<p>The token is placed in the <code>Authorization</code> header of requests to iQmetrix APIs, prefixed by the word <code>Bearer</code>.</p>

<h5 id="example-request">Example Request</h5>

<pre><code>Authorization: Bearer (Access Token)
</code></pre>

<h2 id="step-2---creating-the-user">Step 2 - Creating the User</h2>

<p>The goal of this step is to create an Employee profile in the Entity Store. Our platform performs synchronizations to push these users into their respective companies in RQ.</p>

<p>The <code>ParentEntityId</code> (Company ID from Entity Store) is required to import the employee.</p>

<p>Ensure that you mark down the <code>Id</code> from the response, to be used in the later steps.</p>

<h3 id="adding-a-user">2.1 Adding a User</h3>

<p>Should you omit the <code>password</code> field in this API call (e.g. a brand new employee) you will need to force a <a href="#setting-up-a-temporary-password">temporary password</a>. Otherwise, the user will not be able to log into RQ. Ensure there is a <code>ParentEntityId</code>, as this is the Company ID.</p>

<p>To import a user from your existing system, see <a href="/api/user-manager/#importing-an-existing-user">Importing an Existing User</a>.</p>

<p>In RQ, the JSON request would appear similar to the figure below.</p>

<p><br />
<strong>Figure 1:</strong> Displays the RQ results from adding a user.</p>

<p><img src="http://localhost:4006//images/rq-general-details.png" alt="Employee general fields" /></p>

<p><br /></p>

<h5 id="example-request-1">Example Request</h5>

<pre><code>POST https://usermanagerdemo.iqmetrix.net/v1/Users/importExisting
Authorization: Bearer (Access Token)
Accept: application/json
Content-Type: application/json
{
    "UserName": "johnb@test.com",
    "Password": "samplepassword",
    "Email": "johnb@test.com",
    "FirstName": "John",
    "LastName": "Bates",
    "ParentEntityId": 14146,
    "ClientUserId": "132",
    "JobTitle": "Sales Clerk",
    "Address": {
        "AddressLine1": "1432 Merry View Road",
        "AddressLine2": "",
        "City": "Big Windy",
        "StateCode": "ON",
        "CountryCode": "CA",
        "Zip": "A1A2B2"
    },
    "PhoneNumbers": [
        {
            "Number": "6135550127",
            "Extension": "5532",
            "Type": "Work"
        }
    ]
}
</code></pre>

<h5 id="example-response">Example Response</h5>

<pre><code>HTTP 201 Content-Type: application/json
{
    "Password": null,
    "Id": 19760,
    "CorrelationId": null,
    "ClientUserId": "132",
    "FirstName": "John",
    "LastName": "Bates",
    "UserName": "johnb@test.com",
    "Email": "johnb@test.com",
    "IsActive": true,
    "ParentEntityId": 14146,
    "Profiles": [],
    "Picture": null,
    "Address": {
        "AddressLine1": "1432 Merry View Road",
        "AddressLine2": "",
        "City": "Big Windy",
        "StateCode": "ON",
        "CountryCode": "CA",
        "Zip": "A1A2B2"
    },
    "PhoneNumbers": [
        {
            "Number": "6135550127",
            "Extension": "5532",
            "Type": "Work"
        }
    ],
    "JobTitle": "Sales Clerk",
    "Version": 1
}
</code></pre>

<h3 id="setting-up-a-temporary-password">2.2 Setting Up a Temporary Password</h3>

<p>If you omitted the password from the previous step, then you must force the user to change their password when logging in for the first time.</p>

<p>To set a temporary password for your user, see <a href="/api/user-manager/#setting-a-temporary-password">Setting a Temporary Password</a></p>

<h5 id="example-request-2">Example Request</h5>

<pre><code>POST https://usermanagerdemo.iqmetrix.net/v1/Users({UserId})/TemporaryPassword
Authorization: Bearer (Access Token)
Accept: application/json
Content-Type: application/json
{
    "Password": "newpa55word"
}
</code></pre>

<h5 id="example-response-1">Example Response</h5>

<pre><code>HTTP 204 Content-Type: application/json
</code></pre>

<h2 id="step-3-assigning-locations">Step 3 Assigning Locations</h2>

<p>Once you have created a user in the system, the next step is to assign it to a location within your company tree. This ensures that employeee visibility and activity is restricted to that particular location. For more information on Company Tree, see <a href="/company-tree/">Company Tree</a>.</p>

<h3 id="getting-company-locations">3.1 Getting Company Locations</h3>

<p>Getting all locations for a company will provide both store information as well as the Location IDs to be used in Step 3.2.</p>

<p>To get a list of locations, see <a href="/api/company-tree/#getting-all-locations-for-a-company">Getting All Locations for a Company</a></p>

<h5 id="example-request-3">Example Request</h5>

<pre><code>GET https://entitymanagerdemo.iqmetrix.net/v1/Companies({CompanyId})/Locations
Authorization: Bearer (Access Token)
Accept: application/json
</code></pre>

<h5 id="example-response-2">Example Response</h5>

<pre><code>HTTP 200 Content-Type: application/json
{
    "Id": 14202,
    "Name": "Dufferin Mall",
    "Description": "This Location is used to clear out discounted inventory",
    "Roles": [
        {
            "Name": "Location"
        }
    ],
    "CreatedUTC": "2015-02-26T00:03:01.372Z",
    "LastModifiedUTC": "2015-02-27T00:03:06.392Z",
    "Area": {
        "Value": 1100,
        "Unit": "SqFt"
    },
    "Address": {
        "AddressLine1": "4970 Hillside Avenue",
        "AddressLine2": "Apt 115",
        "City": "Edmonton",
        "StateCode": "ON",
        "StateName": "Ontario",
        "CountryCode": "CA",
        "CountryName": "Canada",
        "Zip": "P9H 9I4"
    },
    "Attributes": {},
    "ClientEntityId": "123",
    "Contacts": [
        {
            "Name": "John Smith",
            "Description": "Store Manager",
            "PhoneNumbers": [
                {
                    "Description": "Main Line",
                    "Number": "5555555555",
                    "Extension": "1234"
                }
            ]
        }
    ],
    "Geography": {
        "Longitude": -104.612034,
        "Latitude": 50.443559
    },
    "Relationships": [],
    "SortName": "dufferin mall",
    "StoreHours": {
        "Monday": {
            "Open": {
                "Hour": 10,
                "Minute": 0
            },
            "Close": {
                "Hour": 10,
                "Minute": 0
            }
        },
        ...
    },
    "StorePhoneNumbers": [
        {
            "Description": "Main Line",
            "Number": "5555555555",
            "Extension": "1234"
        }
    ],
    "TimeZone": {
        "Id": "Alaskan Standard Time",
        "DaylightSavingTimeEnabled": true
    },
    "Version": 13
}
</code></pre>

<h3 id="assigning-a-location-to-a-user">3.2 Assigning a Location to a User</h3>

<p>The employee from your system will need to be assigned to a location within the company tree in RQ.</p>

<p>To assign a user to a location, see <a href="/api/user-manager/#assigning-a-user-to-a-location">Assigning a User to a Location</a></p>

<p><br />
<strong>Figure 2:</strong> Displays the RQ result from assigning the Location field.</p>

<p><img src="http://localhost:4006//images/rq-user-location.png" alt="rq assigned location" /></p>

<p><br /></p>

<h5 id="example-request-4">Example Request</h5>

<pre><code>PUT https://usermanagerdemo.iqmetrix.net/v1/Users({UserId})/Locations({LocationId})
Authorization: Bearer (Access Token)
Accept: application/json
Content-Type: application/json
</code></pre>

<h5 id="example-response-3">Example Response</h5>

<pre><code>HTTP 204 Content-Type: application/json
</code></pre>

<h2 id="step-4-assigning-security-roles">Step 4 Assigning Security Roles</h2>

<p>The goal of this step is to ensure that your employee has a security role in RQ that matches their role in your system. If a Security Role is not assigned to a User, then they will not be able to interact with RQ.</p>

<h3 id="getting-company-security-roles">4.1 Getting Company Security Roles</h3>

<p>Getting the security roles for a company is the quickest way to retrieve security roles. You are also able to retrieve security roles by Location or Division/Group.</p>

<p>Please note down the Security Role <code>Id</code> that you will be assigning based on the <code>EntityId</code> you provided.</p>

<p>For more information, see <a href="/api/security-roles/#getting-all-security-roles-for-an-entity">Getting All Security Roles for an Entity</a></p>

<h5 id="example-request-5">Example Request</h5>

<pre><code>GET https://usermanagerdemo.iqmetrix.net/v1/Entities({EntityId})/SecurityRoles
Authorization: Bearer (Access Token)
Accept: application/json
</code></pre>

<h5 id="example-response-4">Example Response</h5>

<pre><code>HTTP 200 Content-Type: application/json
[
    {
        "Id": 316,
        "Name": "Store Manager"
    }
]
</code></pre>

<h3 id="assigning-a-security-role">4.2 Assigning a Security Role</h3>

<p>The <code>EntityId</code> assigned to this User would be the Company ID, Location ID, or a Group or Division ID.</p>

<p>For our scenario, we are assigning the security role <code>Store Manager</code> at this location.</p>

<p>To assign a security role, see <a href="/api/security-roles/#assigning-a-security-role-to-a-user">Assigning a Security Role to a User</a></p>

<p><br />
<strong>Figure 3:</strong> Displays the RQ result from assigning the Security Role field.</p>

<p><img src="http://localhost:4006//images/rq-general-security.png" alt="rq security role" /></p>

<p><br /></p>

<h5 id="example-request-6">Example Request</h5>

<pre><code>POST https://usermanagerdemo.iqmetrix.net/v1/Users({UserId})/AssignedRoles
Authorization: Bearer (Access Token)
Accept: application/json
Content-Type: application/json
{
    "EntityId": 14159,
    "SecurityRoleId": 316
}
</code></pre>

<h5 id="example-response-5">Example Response</h5>

<pre><code>HTTP 201 Content-Type: application/json
{
    "Id": 6548,
    "EntityId": 14159,
    "SecurityRoleId": 316,
    "UserId": 19760
}
</code></pre>

<h2 id="optional-updating-a-user">(Optional) Updating a User</h2>

<p>This call is <strong>destructive</strong>, and will replace all existing values for the user. When updating a user you must ensure that all previous values are included in the body of the request as well.</p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip: </b>You cannot change a user's password using this method. To update their password, you must set a temporary password. </div>

<p>A user, its properties, and attributes can be updated anytime by <a href="/api/user-manager/#updating-a-user">Updating a User</a></p>

<h5 id="example-request-7">Example Request</h5>

<pre><code>PUT https://usermanagerdemo.iqmetrix.net/v1/Users({UserId})
Authorization: Bearer (Access Token)
Accept: application/json
Content-Type: application/json
{
    "Id": 19760,
    "FirstName": "John",
    "LastName": "Bates",
    "UserName": "johnb@kentel.com",
    "Address": {
        "AddressLine1": "1432 Merry View Road",
        "AddressLine2": "",
        "City": "Big Windy",
        "StateCode": "ON",
        "CountryCode": "CA",
        "Zip": "A1A2B2"
    },
    "Attributes": {
        "Department": "Sales"
    },
    "ClientUserId": "132",
    "Email": "johnb@kentel.com",
    "IsActive": true,
    "JobTitle": "Sales Clerk",
    "ParentEntityId": 1,
    "PhoneNumbers": [
        {
            "Number": "6135550127",
            "Extension": "5532",
            "Type": "Work"
        }
    ],
    "Picture": {},
    "Version": 1
}
</code></pre>

<h5 id="example-response-6">Example Response</h5>

<pre><code>HTTP 200 Content-Type: application/json
{
    "Id": 2576,
    "FirstName": "John",
    "LastName": "Bates",
    "UserName": "johnb@kentel.com",
    "Address": {
        "AddressLine1": "1432 Merry View Road",
        "AddressLine2": "",
        "City": "Big Windy",
        "StateCode": "ON",
        "CountryCode": "CA",
        "Zip": "A1A2B2"
    },
    "Attributes": {
        "Department": "Sales"
    },
    "ClientUserId": "132",
    "Email": "johnb@kentel.com",
    "IsActive": true,
    "JobTitle": "Sales Clerk",
    "ParentEntityId": 1,
    "PhoneNumbers": [
        {
            "Number": "6135550127",
            "Extension": "5532",
            "Type": "Work"
        }
    ],
    "Picture": {},
    "Version": 1
}
</code></pre>

<h2 id="optional-terminating-an-employee">(Optional) Terminating an Employee</h2>

<p>An employee can be terminated at anytime by <a href="/api/user-manager/#disabling-a-user">Disabling their user account</a>.</p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip: </b>This method does not delete the employee.</div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note: </b>Disabling a User does NOT free up their email address or username to be used to create another User. To free up an email address or username, you must instead update the email or username of the original User to something else. </div>

<h5 id="example-request-8">Example Request</h5>

<pre><code>DELETE https://usermanagerdemo.iqmetrix.net/v1/Users({UserId})
Authorization: Bearer (Access Token)
</code></pre>

<h5 id="example-response-7">Example Response</h5>

<pre><code>HTTP 200 Content-Type: application/json
</code></pre>
</div>
              <div class="col-lg-1 hidden-md hidden-sm hidden-xs"><!-- start page metadata -->


<div class="pageMetadata affix">
    <div class="pageMetadataTitle">Table of Contents</div>
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {

    $('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2, h3' });

    //Resize once
    resizeWindow();

    //Resize whenever window changes
    $(window).resize(function () {
        resizeWindow();
    });

});

function resizeWindow() {

    var windowHeight = $(window).height();
    var windowWidth = $(window).width();

    var tocHeight = $(".pageMetadata").height();

    if(windowWidth < 1560 || windowHeight < tocHeight) {        
        //Grab "pageMetadata" and move it to first  child of .post-header
        $(".pageMetadata").prependTo(".post-header");
        $(".pageMetadata").removeClass("affix");        
    } else if(windowWidth > 1560) {
        //Grab "pageMetadata" and move it back to where it was
        $(".pageMetadata").appendTo(".col-lg-1.hidden-md.hidden-sm.hidden-xs");
        $(".pageMetadata" ).addClass("affix");
    }      
}

</script>

<div id="toc"></div>

    
    <p><div class="metadataRow"><span class="tagTitle">Last updated:</span> 11-04-2016</div></p>
    

</div>




<link rel="stylesheet" type="text/css" href="../../css/syntax.css">

<!-- end pageMetadata --></div>
            
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-408430-5', 'auto');
    ga('send', 'pageview');
</script>



</html>

